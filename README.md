[**中文**](./README.md) | [**English**](./README_EN.md)

<p align="center">
    <br>
    <img src="./pics/promptCBLUE_banner_v0.png" width="600"/>
    <br>
</p>
<p align="center">
    <img alt="GitHub" src="https://img.shields.io/github/license/ymcui/Chinese-LLaMA-Alpaca.svg?color=blue&style=flat-square">
    <img alt="GitHub top language" src="https://img.shields.io/github/languages/top/ymcui/Chinese-LLaMA-Alpaca">
</p>


以ChatGPT、GPT-4等为代表的大语言模型（Large Language Model, LLM）掀起了新一轮自然语言处理领域的研究浪潮，展现出了类通用人工智能（AGI）的能力，受到业界广泛关注。在LLM大行其道的背景下，几乎所有的NLP任务都转化为了基于提示的语言生成任务。然而，在中文医学NLP社区中，尚未有一个统一任务形式的评测基准。

为推动LLM在医疗领域的发展和落地，我们现推出**PromptCBLUE**:

- 🚀 将[CBLUE](https://tianchi.aliyun.com/dataset/95414)基准中的各个任务(如医疗文本NER，事件抽取等)转化为基于提示的生成任务; 
- 🚀 为提升LLM的医疗对话能力，增加百万级的在线问诊数据; (TODO)
- 🚀 新增文献标题生成/摘要生成任务；(TODO)
- 🚀 对CBLUE基准中的任务[Text2DT](https://github.com/michael-wzhu/Text2DT_Baseline)进行重构，形成第一个中文医疗推理数据集，用于评测中文LLM在医疗场景下的推理能力；(TODO)


----

[Text2DT](https://github.com/michael-wzhu/Text2DT_Baseline) | [中文医疗大模型ChatMed](https://github.com/michael-wzhu/ChatMed)


## 更新

2023/4/5 上传PromptCBLUE的v0.1版本，包含xxx个任务共xxx条数据. 数据下载: [HuggingFace Hub]()

2023/4/3 PromptCBLUE上线了，将持续更新(目前版本只包含train/valid split，后续将提供在线评估平台) 🎉🎉🎉




## 数据集详情

### PromptCBLUE总体统计


| 微调训练场景      | -    |
|-------------|------|
| 版本号         | v0.1 |
| prompt 模板数量 | xxx  |
| 训练集         | xxx  |
| 验证集         | xxx  |
| 测试集         | ⏳    |


### 数据统计


| 数据集      | #Train | #dev | #test | prompt模板数量 | 评价指标 | 
|----------|--------|------|-------|-----------|------|
| CMeEE-v2 | -      | -    | -     | -         | -    |



### 样本一般格式

我们采用xxx个指令微调模板，对CBLUE基准中的各个任务进行。经过改造后，医疗文本NLP数据集都将转化为如下格式。input字段是模型的输入，target字段是模型的输出，type是原任务类型(不作为模型输入)，answer_choices字段是选项，只有分类、术语标准化、推理类任务上该字段才会有意义。

```bash
{
  "input": str,
  "target": str,
  "type": str,
  "answer_choices": str,
  "sample_id": str,
}
```


### 任务改造

为了将CBLUE中的各种不同任务适配为符合LLM的输入输出格式，我们对CBLUE各个数据集进行如下改造：

#### CMeEE任务

本任务原本是标准的医学文本NER任务，选手需要给出医学实体mention在待抽取文本中的具体span位置。在PromptCBLUE中，本任务被改造为：根据指定的实体类型，生成实体mention。在评分时，我们只考虑实体mention及其类型标签，不再考虑span位置信息。样例如下:

```bash

{
  "input": "医学实体识别：\n外周血白细胞计数常明显升高，伴核左移。\n实体选项：疾病，医学检验项目，医院科室，身体部位，微生物类，临床表现，药物\n答：", 
  "target": "上述句子中的实体包含：\n医学检验项目实体：外周血白细胞计数\n疾病实体：\n医院科室实体：\n药物实体：\n微生物类实体：", 
  "answer_choices": ["疾病", "医学检验项目", "医院科室", "身体部位", "微生物类", "临床表现", "药物"], 
  "task_type": "ner", 
  "task_dataset": "CMeEE-V2", 
  "sample_id": "train-134372"
}

```

#### CMeIE任务

本任务是三元组联合抽取任务。在PromptCBLUE中，我们将其定义为：在指定的关系类型下，抽取形成该关系的头尾实体mention。参赛者可以根据需要对本任务的指令/提示进行进一步拆解，以更好的完成任务。示例如下：

```bash

{
  "input": "找出句子中的具有临床表现，同义词关系类型的头尾实体对：\n妊娠期高血压@健康孕妇可以通过全身血管阻力 (systemic vascular resistance，SVR) 和心输出量下降得以平衡，而妊娠期高血压妇女SVR较低，心输出量往往会增加。", 
  "target": "上述句子中临床表现关系的实体对如下：\n头实体：妊娠期高血压，尾实体：SVR较低；头实体：妊娠期高血压，尾实体：心输出量往往会增加；\n上述句子中同义词关系的实体对如下：", 
  "answer_choices": ["临床表现", "同义词"], 
  "task_type": "spo_generation", 
  "task_dataset": "CMeIE", 
  "sample_id": "train-67405"
}

```


#### CHIP-CDEE任务

本任务是医学事件抽取，即给定一段现病史或者医学影像所见报告，要求从中抽取临床发现事件的四个属性: 解剖部位、主体词、描述词，以及发生状态。在PromptCBLUE下，该任务表现为根据给定文本，生成相应的事件信息描述。注意原任务的标注中，部分主体词是做了ICD10标准化的，我们将这一部分样本过滤掉了，也就是说我们目前主要是评估LLM的医学事件抽取能力。

```bash

{
  "input": "7月前患者给予亚砷酸氯化钠(伊泰达)注射液 10mg 静滴14天，6月前予以口服维甲酸 20mg bid*14天维持治疗，5月前行亚砷酸氯化钠(伊泰达)注射液 10mg 静滴14天维持化疗，3月余前复查骨髓检查示增生性骨髓象；fish：pml/rara（双色双融合）(15/17)：未见异常；腰穿脑脊液未见异常细胞。现为维持化疗入院。\n问题：句子中的临床发现事件及其属性是什么？\n说明：临床发现事件由主体词，发生状态，描述词和解剖部位组成", 
  "target": "上述句子中的临床发现事件如下：\n主体词：fish：pml/rara（双色双融合）(15/17)异常；发生状态：否定；描述词：；解剖部位：\n主体词：骨髓象；发生状态：；描述词：增生性；解剖部位：骨髓", 
  "answer_choices": null, 
  "task_type": "event_extraction", 
  "task_dataset": "CHIP-CDEE", 
  "sample_id": "train-17503"
}

```



#### CHIP-CDN任务

该任务原型是给定一诊断原词，要求给出其对应的诊断标准词，而诊断标准词是从ICD-10这一个4w+的标准词库中选择。由于我们不可能一次性将四万个词输入到LLM中，所以我们将CDN任务改造为：给定原词，从候选的若干个ICD-10诊断标准词中选择出匹配的词(可能有多个, 可能一个都没有)。

```bash

{
  "input": "主动脉弓缩窄心功能低下\n归一化后的标准词是？\n实体选项：胫前动脉假性动脉瘤，主动脉缩窄，男性性腺功能低下，男性性腺功能低下，垂体功能低下，心功能不全\n说明：从候选的若干个ICD-10诊断标准词中选择出与原诊断描述匹配的词\n答：", 
  "target": "主动脉缩窄，心功能不全", 
  "answer_choices": ["胫前动脉假性动脉瘤", "主动脉缩窄", "男性性腺功能低下", "男性性腺功能低下", "垂体功能低下", "心功能不全"], 
  "task_type": "normalization", 
  "task_dataset": "CHIP-CDN", 
  "sample_id": "train-17932"
}



```



#### CHIP-CTC任务

本次评测任务的主要目标是针对临床试验筛选标准进行分类。注意到原数据集中一个占比较高的类型为"other"类，在PromptCBLUE下，我们将此类型名称取消。本任务转化为：根据给定的临床试验筛选标准类型，生成出给定句子的类型，或者回答"非上述类型"表明指令中给出的类型与句子不符合。


```bash

{
  "input": "8.过去3个月内有过眼内手术的患者；\n这句话是什么临床试验筛选标准类型？\n类型选项：成瘾行为，吸烟状况，性取向，残疾群体，读写能力，肿瘤进展，参与其它试验，疾病分期，能力，疾病，药物，诊断，教育情况，口腔相关，受体状态，健康群体，数据可及性，设备，献血，过敏耐受，特殊病人特征，睡眠，怀孕相关，研究者决定，器官组织状态，症状(患者感受)，治疗或手术，护理，性别，种族，实验室检查，知情同意，饮食，年龄，居住情况，病例来源，酒精使用，体征(医生检测），锻炼，风险评估，预期寿命，伦理审查，依存性", 
  "target": "治疗或手术", 
  "answer_choices": ["成瘾行为", "吸烟状况", "性取向", "残疾群体", "读写能力", "肿瘤进展", "参与其它试验", "疾病分期", "能力", "疾病", "药物", "诊断", "教育情况", "口腔相关", "受体状态", "健康群体", "数据可及性", "设备", "献血", "过敏耐受", "特殊病人特征", "睡眠", "怀孕相关", "研究者决定", "器官组织状态", "症状(患者感受)", "治疗或手术", "护理", "性别", "种族", "实验室检查", "知情同意", "饮食", "年龄", "居住情况", "病例来源", "酒精使用", "体征(医生检测）", "锻炼", "风险评估", "预期寿命", "伦理审查", "依存性"], 
  "task_type": "cls", 
  "task_dataset": "CHIP-CTC", 
  "sample_id": "train-19957"
}
{
  "input": "判断临床试验筛选标准的类型：\n精神分裂症患者组（Schizophrenia，Sch）:符合 DSM-IV偏执型分裂症诊断标准，年龄、性别、精神病病程与MAP组匹配，听力及视力正常、或矫正后处于正常范围。\n选项：残疾群体，口腔相关，诊断，能力，年龄，饮食，研究者决定，献血，参与其它试验，设备，护理，性别，症状(患者感受)，依存性，睡眠", 
  "target": "非上述类型", 
  "answer_choices": ["残疾群体", "口腔相关", "诊断", "能力", "年龄", "饮食", "研究者决定", "献血", "参与其它试验", "设备", "护理", "性别", "症状(患者感受)", "依存性", "睡眠"], 
  "task_type": "cls", 
  "task_dataset": "CHIP-CTC", 
  "sample_id": "train-63105"
}

```


#### KUAKE-QIC任务

本任务是对医学场景的搜索问题的意图分类。注意到原数据集中一个占比较高的类型为"其他"类，在PromptCBLUE下，我们将此类型名称取消，并将本任务转化为：根据给定的医学搜索意图分类标签，生成出给定句子的类型，或者回答"非上述类型"表明prompt中指定的类型与句子不符合。

```bash

{
  "input": "确定检索词的类型：\n怎样备孕\n类型选项：病情诊断，功效作用，注意事项，治疗方案，后果表述，就医建议，医疗费用\n答：", 
  "target": "非上述类型", 
  "answer_choices": ["病情诊断", "功效作用", "注意事项", "治疗方案", "后果表述", "就医建议", "医疗费用"], 
  "task_type": "cls", 
  "task_dataset": "KUAKE-QIC", 
  "sample_id": "train-29316"
}
{
  "input": "判断下面搜索词的意图：\n武汉传染性尖锐湿疣的治疗方法\n选项：指标解读，治疗方案，功效作用，注意事项，病情诊断，就医建议，疾病描述\n答：", 
  "target": "治疗方案", 
  "answer_choices": ["指标解读", "治疗方案", "功效作用", "注意事项", "病情诊断", "就医建议", "疾病描述"], 
  "task_type": "cls", 
  "task_dataset": "KUAKE-QIC", 
  "sample_id": "train-17235"
}


```

#### CHIP-STS任务

本任务旨在判断两个与疾病相关的问句是否表达相同语义。在PromptCBLUE下，本任务即为：根据输入的两个问句，输出模型对其语义是否相同的判断("是的", "不是")。示例如下：

```bash

{
  "input": "下面两个句子语义是“相同”或“不同”？\n“糖尿病的三多一少是什么”，“无限极的“灵芝皇”和“桑唐饮”能治好糖尿病吗？”。\n选项：相同，不同\n答：", 
  "target": "不同", 
  "answer_choices": ["相同", "不同"], 
  "task_type": "cls", 
  "task_dataset": "CHIP-STS", 
  "sample_id": "train-54981"
}

```


#### KUAKE-QTR任务

本任务旨在判断医疗搜索场景下搜索词Query主题和落地页标题(Title)主题是否一致及达到多大程度上的一致,输出匹配分数(0分, 1分, 2分, 3分)。在PromptCBLUE下，我们将任务转化为：要求LLM评估匹配程度，即输出描述匹配程度的标签词语。

```bash

{
  "input": "下面的搜索词和页面标签的意思有多相同？\n搜索词：宝宝三周了发烧不玩睡觉\n页面标签：孩子三周了手足口发烧一天就不烧了就是睡觉打搀\n选项：完全不匹配，很少匹配有一些参考价值，部分匹配，完全匹配或者没有参考价值\n答：", 
  "target": "部分匹配", 
  "answer_choices": ["完全不匹配", "很少匹配有一些参考价值", "部分匹配", "完全匹配或者没有参考价值"], 
  "task_type": "matching", 
  "task_dataset": "KUAKE-QTR", 
  "sample_id": "train-67418"
}

```



#### KUAKE-QQR任务

本任务旨在判断两个医疗方面得查询(query)的语义关系。在本任务下，LLM需要判断两个查询语句的语义是否完全相等，前者语义覆盖后者，或者后者语义包含前者，或者是毫无关系。示例如下：

```bash

{
  "input": "下面两个句子的语义关系是？\n“伤口涂什么药好得快”，“有伤口涂什么药”。\n选项: 完全一致，后者是前者的语义子集，后者是前者的语义父集或语义毫无关联", 
  "target": "完全一致", 
  "answer_choices": ["完全一致", "后者是前者的语义子集", "后者是前者的语义父集或语义毫无关联"], 
  "task_type": "matching", 
  "task_dataset": "KUAKE-QQR", 
  "sample_id": "train-88139"
}


```

#### KUAKE-IR任务

本任务原本的设置为在100w规模的语料库中检索出与医疗query相关的文档(doc)。为使本任务符合LLM特点的任务，我们将其改造为：将一个query和一个doc输入句子中，判断内容是否匹配。举例如下：

```bash

{
  "input": "医疗搜索：鼻梁被撞鼻梁矫正手术\n以下回答内容是否能够回答搜索问题？\n回答内容：你好，你这中情况一般需要行鼻骨截骨整形及鼻中隔联合矫正，手术需要住院，大概需要10天左右的时间，费用在12000左右，我们医院不对医保，如果是要医保报销需要办转诊手续之后再凭相关单据回所在地报销。\n选项: 相关，不相关\n答：", 
  "target": "相关", 
  "answer_choices": ["相关", "不相关"], 
  "task_type": "matching", 
  "task_dataset": "KUAKE-IR", 
  "sample_id": "train-801751"
}


```


#### CHIP-MDCFNPC任务

本任务是根据一段患者与医生的对话交互，抽取对话中出现的临床发现实体，并最终判断患者在这个临床发现实体上的阴阳性。阴阳性定义为是患者主诉病情描述和医生诊断判别中的阴性和阳性，包括阴性、阳性、其他、不标注这四种。在PromptCBLUE下，我们采用阴阳性标签的描述语句作为模型的输出目标。示例如下：

```bash

{
  "input": "患者：月经来了还可吃乌鸡白凤丸和丹栀逍遥丸吗\n医生：请问类似症状出现多长时间？\n医生：你吃这药是治疗什么的\n患者：我前几个月去检查是游离子腺素增高，月经没来\n医生：什么高\n患者：甲状游离子腺素增高\n医生：把化验单给我看一下。\n患者：现在去检查正常值了\n医生：那你如果月经量多这些药就不吃了，如果月经量少就可以吃。\n患者：就是月经不调\n患者：甲状腺素药还有吃\n医生：是甲状腺功能低下吗？甲减吗？\n患者：我在马来西亚看不懂报告单\n医生：嗯嗯，只有甲状腺功能低下才需要吃甲状腺素。\n问题：上述问诊对话中临床发现有哪些？这些实体的阴阳性是？\n阴阳性选项：已有症状疾病或者假设未来可能发生的疾病等，未患有症状疾病，没有回答、不知道、回答不明确或者模棱两可不好推断，无实际意义的不标注或者和病人当前的状态独立不标注\n说明：临床发现是临床医学下，病人状态描述的概念集合", 
  "target": "上述对话中临床发现实体以及其阴阳性判别如下：\n月经没来：已有症状疾病或者假设未来可能发生的疾病等\n游离子腺素增高：已有症状疾病或者假设未来可能发生的疾病等\n甲状游离子腺素增高：已有症状疾病或者假设未来可能发生的疾病等\n月经量少：无实际意义的不标注或者和病人当前的状态独立不标注\n月经量多：无实际意义的不标注或者和病人当前的状态独立不标注\n月经不调：已有症状疾病或者假设未来可能发生的疾病等\n甲减：没有回答、不知道、回答不明确或者模棱两可不好推断\n甲状腺功能低下：无实际意义的不标注或者和病人当前的状态独立不标注", 
  "answer_choices": ["已有症状疾病或者假设未来可能发生的疾病等", "未患有症状疾病", "没有回答、不知道、回答不明确或者模棱两可不好推断", "无实际意义的不标注或者和病人当前的状态独立不标注"], 
  "task_type": "attr_cls", 
  "task_dataset": "CHIP-MDCFNPC", 
  "sample_id": "train-982126"
}


```


#### IMCS-V2-NER任务

本任务是从医患对话中抽取实体。本任务的指令形式与CMeEE任务相似。示例如下：

```bash

{
  "input": "下面对话中的医学检查检验，症状，医疗操作实体有哪些？\n宝贝也呕吐吗？\n答：", 
  "target": "上述句子中的实体包含：\n医学检查检验实体：\n症状实体：呕吐\n医疗操作实体：", 
  "answer_choices": ["医学检查检验", "症状", "医疗操作"], 
  "task_type": "ner", 
  "task_dataset": "IMCS-V2-NER", 
  "sample_id": "train-63083"
}

```

#### IMCS-V2-DAC任务

本任务旨在从医患对话文本中识别出对话意图。为了将本任务改造的更适合于LLM，我们对本任务的意图进行了改写,使得意图标签名称更符合自然语言形式。本任务的指令形式与QIC任务一致。示例如下：

```bash

{
  "input": "确定这句话的意图:\n你好家长朋友，宝宝咳嗽几天了？\n类型选项：关于症状的询问，关于个人基本信息的回答，关于就医建议的解答，给出诊断，关于已有检查和治疗的提问，关于注意事项的解答，关于用药建议的提问，关于已有检查和治疗的提问，关于用药建议的解答，关于症状的回答，关于病因的回答\n答：", 
  "target": "关于症状的询问", 
  "answer_choices": ["关于症状的询问", "关于个人基本信息的回答", "关于就医建议的解答", "给出诊断", "关于已有检查和治疗的提问", "关于注意事项的解答", "关于用药建议的提问", "关于已有检查和治疗的提问", "关于用药建议的解答", "关于症状的回答", "关于病因的回答"], 
  "task_type": "cls", 
  "task_dataset": "IMCS-V2-DAC", 
  "sample_id": "train-203224"
}


```


#### IMCS-V2-SR任务

本任务包含多个子步骤：(1) 需要从一段医生与患者间的对话中抽取症状; (2)需要给出症状的标准词(从任务给定的400+的标准词库中选择); (3)需要根据对话历史，判断症状的阴阳性，即：患者是否患有该症状， 没有患有该症状， 或者无法根据上下文确定病人是否患有该症状。本任务的指令与CHIP-MDCFNPC任务类似。举例如下：

```bash

{
  "input": "找出当前对话中的症状，并判断阴阳性：\n对话历史：\n患者：没有怎么听啊\n医生：根据您的描述，宝宝咳嗽，嗓子吼，可能是气喘或喉鸣，考虑支气管炎的可能性较大\n当前对话：\n医生：需要带宝宝去医院儿科就诊，用听诊器听诊肺部，查血常规胸片等相关检查，排除肺炎，根据结果，给于控制感染，止咳化痰等对症治疗。\n症状阴阳性选项：没有患有该症状，患有该症状，无法根据上下文确定病人是否患有该症状\n答：", 
  "target": "当前对话中的症状及其阴阳性判断为：\n肺炎：无法根据上下文确定病人是否患有该症状\n感染：患有该症状\n咳：患有该症状\n痰：患有该症状", 
  "answer_choices": ["没有患有该症状", "患有该症状", "无法根据上下文确定病人是否患有该症状"], 
  "task_type": "attr_cls", 
  "task_dataset": "IMCS-V2-SR", 
  "sample_id": "train-5434"
}

```


#### IMCS-V2-MRG任务

本任务要求是从医患对话中自动生成对应的诊疗报告。标注数据中，统一的将诊疗报告分拆为6个章节(主诉, 现病史, 辅助检查, 既往史, 诊断, 建议)。在PromptCBLUE下，我们要求LLM按照这6个章节的顺序进行一次生成。在评测时，我们仍然会将模型输出拆分为这6个章节。样例如下：

```bash

{
  "input": "问诊对话历史：\n患者：宝宝刚满月，母乳喂养，最近两天时不时的会咳嗽一声，食欲和精神还行，只不过睡觉不是很安稳。家里面最近两天大人和宝宝的姐姐也有感冒，不知道宝宝是被传染了感冒还是怎么样，请问怎么治疗？\n医生：您好，我是您的辅诊医生，需要询问几个问题，才能更好的评估孩子情况，您还在吗？\n医生：宝宝体温正常吗？\n医生：还在吗？\n患者：在\n医生：您好\n医生：宝宝现在体温正常吗\n患者：体温正常\n医生：口吐泡泡吗\n患者：没有\n医生：嗓子哑吗\n患者：哭起来跟以前一样\n医生：好的\n患者：只不过鼻音重\n医生：还有其他症状吗\n患者：睡不安稳\n医生：出汗多吗？\n患者：不多\n医生：哭闹吗\n患者：比以前爱哭闹\n医生：大便什么样子\n患者：这个没注意，昨天一天没有大便，今天上午大便的，大便以后睡得安稳一些了，不过还是时不时咳嗽一声\n医生：有痰吗?\n患者：没有痰，干咳\n医生：嗯嗯\n医生：流鼻涕吗\n患者：没有\n医生：嗯嗯\n医生：因为宝宝比较小，最好带宝宝去公立医院儿科就诊，听一下肺部没有问题的话可以观察看看\n根据上述对话，给出诊疗报告\n说明：诊疗报告分为主诉, 现病史, 辅助检查, 既往史, 诊断, 建议这六个章节。\n答：", 
  "target": "上述问诊对话的诊疗报告如下：\n主诉：阵发性咳嗽。\n现病史：患儿阵发性干咳两天。\n辅助检查：暂缺。\n既往史：不详。\n诊断：咳嗽待查。\n建议：儿科就诊，听诊肺部。", 
  "answer_choices": null, 
  "task_type": "report_generation", 
  "task_dataset": "IMCS-V2-MRG", 
  "sample_id": "train-7798"
}

```


#### MedDG任务

本任务要求：给定医生和患者交流的对话历史，生成医生的下一句回复。MedDG的原始设置强调实体蕴含，即假定医生的下一句回复需要包含一定的实体。在PromptCBLUE下，我们不对实体蕴含进行要求，只评测LLM作为医生角色的回复生成效果。样例如下：

```bash

{
  "input": "患者：最近总是到了晚上就胃很难受。这几天吃过饭就有点反胃但是都是头痛头晕恶心。胃还是很难受（女，19岁）\n医生：你好，这种情况有多长时间了？\n患者：半个月了。\n医生：平时吃饭规律吗？\n根据上述对话历史，作为医生应该如何回复？\n答：", 
  "target": "胃部感觉难受是怎么难受？反酸烧心打嗝？还是胃疼胃胀？", 
  "answer_choices": null, 
  "task_type": "response_generation", 
  "task_dataset": "MedDG", 
  "sample_id": "dev-19346"
}

```



### 数据样例

## 评测方案

### 提交格式

虽然PromptCBLUE中所有的任务都已经转化为了根据prompt生成回复的统一格式，在评测中我们仍然需要将部分任务的回复解析为结构化格式,以json格式进行提交。提交文件总体格式如下：

```bash

{
  "task_name": [
    {
      "sample_id": str,
      "answer": Union[str, list, dict],
    }
  ]
}

```

示例：test集与dev集采用相同的结构化格式，请参考[dev集结构化格式](./datasets/PromptCBLUE/open_version_v0.1/dev_structured.json)。

请大家在提交时注意：每个test样本的答案都需要提交，且不能更改样本"sample_id"字段，否则评测系统将会因为样本数量不对应而无法输出分数。


### 评价指标

本评测任务只有一个测试集，但是其包含多个任务的测试样本，我们采用在各个任务上分别计分的方式进行评测。各个任务上的评测指标如下：

- 对于CMeEE-V2和IMCS-V2-NER任务，采用基于实体实例层面的严格的(strict)，micro的Precision, Recall, F1分数。这里的实体实例包含mention（即实体名称的所有组成字符）和类型这两个组成字段。这里"严格的"指模型必须在指定的样本sample_id上，完全正确预测出ground truth中的实体实例的mention和类型，才能算是成功预测出这个实体实例，则true positive (TP) 加1。而如果模型预测的实体实例不在ground truth中，则false positive (FP)加1。如果ground truth中的实体实例未被模型预测到，则false negative(FN)加1。最终根据整个测试集上的TP，FP，FN计算Precision, Recall, F1分数。
- 对于CMeIE任务，采用基于三元组实例层面的严格的(strict)，micro的precision, recall, F1分数。这里的三元组实例包含头实体mention, 尾实体mention，和关系类型字段。
- 对于CHIP-CDEE任务，采用基于临床事件实例层面的严格的(strict)，micro的precision, recall, F1分数。这里的临床事件实例包含主体词，发生状态，描述词和解剖部位字段。
- 对于IMCS-V2-SR和CHIP-MDCFNPC任务，采用基于临床发现或者症状实例层面的严格的(strict)，micro的precision, recall, F1分数。这里的临床发现或者症状实例包含mention和阴阳性判断标签字段。
- 对CHIP-CDN任务，采用基于ICD-10标准词实例层面的严格的(strict)，micro的precision, recall, F1分数。这里的ICD-10标准词实例包含mention和阴阳性判断标签字段。
- 对CHIP-STS， CHIP-CTC，IMCS-V2-DAC，KUAKE-IR，KUAKE-QIC，KUAKE-QTR任务，我们采用Micro的precision, recall, F1分数作为评估指标。
- 对于MedDG和IMCS-V2-MRG数据集，我们采用Rouge-1，Rouge-2，Rouge-L分数作为评估指标。为避免分词影响，计算rouge分数前，会将句子中的汉字拆开，用空格分隔。IMCS-V2-MRG任务中，需要将模型生成的诊断报告拆分为主诉, 现病史, 辅助检查, 既往史, 诊断, 建议这六个章节，分别计算rouge得分后取平均分。

上述任务中，F1(micro/macro)或者Rouge-L将作为每个任务的主要指标。


### 其他评测规则

- PromptCBLUE的目标是评估LLM在不同医疗任务的总体表现，所以评测参与者只能使用一个LLM模型主干来完成整个测试集的评测。如果参与者使用了参数高效微调方法，则其总共使用的参数高效微调模块的总参数量不得超过其LLM模型主干的1%。

- 排名进入前十的个人参与者需提交代码与模型下载链接。排名前十的公司参与者如果受限于公司政策无法开源其模型参数，可以提供可访问的网页demo地址供组织者调用抽查。

- 评测参与者不得使用GPT-4, ChatGPT，文心一言等公开模型api进行测试集预测；

- 评测参与者可以使用任何资源进行LLM训练，包括采用自有的医疗领域(有标注/无标注)数据进行训练。

- 评测参与者可以采用更多的prompt，包括self-instruct方法得到的数据进行评测。但是在预测时，需要采用测试集现有的prompt进行评测。我们正在构建大规模的[医疗领域self-instruct数据集]()。

- 评测参与者需要提交自有LLM在test集上的生成结果(test.json)与结构化的预测结果(test_sructured.json)，包括解析test.json文件转化为test_sructured.json的代码。

- 我们鼓励评测参与者采用自有的LLM生成预测结果的同时生成其思维过程。我们目前正在研讨如何对LLM在PromptCBLUE上的思维过程进行人工评测。


## baseline模型

TODO: 我们基于[中文医疗大模型ChatMed](https://github.com/michael-wzhu/ChatMed)构建PromptCBLUE的baseline模型。详细结果我们将会尽快更新。


### 零样本设定

在此设定下，所有的模型都只经过预训练，而未在具体NLP任务上进行微调。

实验结果：⏳

### 少样本设定

在此设定下，百亿以内模型在每个数据集1000个训练样本的设定下进行全量微调/高效参数微调。

实验结果：⏳

### 全样本设定

在此设定下，百亿以内模型在每个数据集全量训练样本的设定下进行高效参数微调或者全量微调。

实验结果：⏳



## 致谢

本项目基于CBLUE基准等数据集进行二次开发，在此对相关项目和研究开发人员表示感谢。

- [CBLUE](https://tianchi.aliyun.com/dataset/95414)

Logo中的小学霸羊驼是由[midjourney](http://midjourney.com)自动生成。



## 免责声明

本项目相关资源仅供学术研究之用，严禁用于商业用途。



## 问题反馈
如有问题，请在GitHub Issue中提交。

- 在提交问题之前，请先查看FAQ能否解决问题，同时建议查阅以往的issue是否能解决你的问题。
- 重复以及与本项目无关的issue会被[stable-bot](stale · GitHub Marketplace)处理，敬请谅解。
- 礼貌地提出问题，构建和谐的讨论社区。


## References

- [CBLUE基准]()